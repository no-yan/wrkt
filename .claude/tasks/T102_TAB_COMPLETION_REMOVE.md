# T102: Add Tab Completion for Remove Command

**Priority**: High  
**Complexity**: Simple (1h)  
**Status**: Ready for assignment  
**Worktree**: Create `feature/tab-completion-remove`

## üéØ PROBLEM STATEMENT

The `remove` command is missing from zsh tab completion, making it harder for users to discover and use the command efficiently.

**Current State**: Tab completion works for `add`, `list`, `switch`, `clean`, `shell-init` but not `remove`

## üìã TASK SCOPE

### Primary Objective
Add `remove` command to zsh tab completion system in shell integration.

### Specific Changes Required
1. **Update completion list** in `cmd/shell_init.go`
2. **Test tab completion** works correctly
3. **Ensure consistency** with other commands

## üîß TECHNICAL REQUIREMENTS

### Implementation Details

#### Current Completion System
```bash
# Generated by wrkt shell-init
compdef '_wrkt_completion' wrkt
_wrkt_completion() {
    local -a commands
    commands=(
        'add:Create a new worktree'
        'list:List all worktrees'
        'switch:Switch to a worktree'
        'clean:Remove stale worktrees'
        'shell-init:Generate shell integration'
        # 'remove' is missing here
    )
    _describe 'command' commands
}
```

#### Required Change
Add `remove` command to the completion list with appropriate description.

### Files to Modify
- `cmd/shell_init.go` (main completion logic)
- Potentially test files if completion testing exists

### Expected Code Change
```go
// In shell_init.go, add to completion commands:
"remove:Remove a worktree"
```

## ‚úÖ ACCEPTANCE CRITERIA

### Functional Requirements
- [ ] `wrkt <TAB>` shows `remove` as an option
- [ ] `wrkt remove <TAB>` shows available worktree names
- [ ] Completion description is clear and consistent
- [ ] Works in zsh environment

### Quality Requirements
- [ ] No regression in existing completions
- [ ] Consistent formatting with other commands
- [ ] Integration test passes (if exists)

### User Experience Requirements
- [ ] Tab completion feels natural and responsive
- [ ] Help text is informative
- [ ] Consistent with CLI conventions

## üß™ TESTING STRATEGY

### Manual Testing
```bash
# Setup shell integration
eval "$(./wrkt shell-init)"

# Test basic completion
wrkt <TAB>
# Should show: add, list, switch, remove, clean, shell-init

# Test remove completion
wrkt remove <TAB>
# Should show available worktree names
```

### Integration Testing
```bash
# If shell integration tests exist
go test ./cmd/... -run Shell -v

# Test in real zsh environment
zsh
eval "$(./wrkt shell-init)"
# Test completion manually
```

### Regression Testing
```bash
# Ensure other completions still work
wrkt add <TAB>
wrkt switch <TAB>
wrkt list <TAB>
```

## üìÇ DEVELOPMENT WORKFLOW

### Setup
```bash
# Create new worktree
./wrkt add feature/tab-completion-remove
cd /Users/noyan/ghq/github.com/no-yan/wrkt/worktrees/feature-tab-completion-remove

# Verify current state
eval "$(./wrkt shell-init)"
wrkt <TAB>  # Note that remove is missing
```

### Implementation Process
1. **Analyze current completion code** in `cmd/shell_init.go`
2. **Find completion command list** 
3. **Add remove command** with consistent description
4. **Test manually** in zsh environment
5. **Verify no regression** in other completions

### Completion Checklist
- [ ] Code change implemented
- [ ] Manual testing confirms completion works
- [ ] No regression in other completions
- [ ] Code formatted and linted
- [ ] Committed with conventional commit message
- [ ] Task marked complete

## üîç IMPLEMENTATION HINTS

### File Location
Look for completion logic in `cmd/shell_init.go` around shell function generation.

### Pattern to Follow
```go
// Find existing completion commands and add:
commands = append(commands, "remove:Remove a worktree")
```

### Consistency Check
Ensure description format matches existing commands:
- `add:Create a new worktree`  
- `remove:Remove a worktree` (should match this pattern)

## üö® POTENTIAL BLOCKERS

### Low Risk Issues
- **Shell environment**: May need zsh for testing
- **Completion caching**: May need to restart shell to see changes

### Escalation Criteria
- If completion system is more complex than expected
- If testing reveals edge cases or conflicts

## üîó RELATED WORK

### No Dependencies
This task is completely independent and can be worked on immediately.

### Future Impact
- Improves user experience for remove command
- Sets pattern for future command additions
- May inform T301 (merge to main) timing

---

**Estimated Completion**: 1 hour focused work  
**Success Metric**: Tab completion includes and works for remove command  
**Next Action**: Ready for immediate assignment